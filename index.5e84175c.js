function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return o[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a.register("fExtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,o){if(!t.has(e))throw new TypeError("attempted to "+o+" private field on non-instance");return t.get(e)}})),a.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),a.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),a("kyEFX").register(JSON.parse('{"5ZPII":"index.5e84175c.js","edJkd":"amazon-icon.bf9c062f.png","ckWAI":"open-book-icon.13365d66.png","87zR3":"book-shop-icon.f4a265a5.png","3rzcU":"amazon-icon@2x.3254cb4c.png","LbtVt":"open-book-icon@2x.66c58f73.png","fUzAu":"book-shop-icon@2x.88845c4c.png","8OQ7p":"icons.4ee90e29.svg","5UbS1":"index.81632272.css","jiPnx":"shopping-list.b0b7b530.js"}'));var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var o=s.default(e,t,"get");return c.default(e,o)};var s=i(a("fExtF")),c=i(a("iaRLo"));function i(e){return e&&e.__esModule?e:{default:e}}var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t,o){u.default(e,t),t.set(e,o)};var d,u=(d=a("7K24o"))&&d.__esModule?d:{default:d};var g=new WeakMap,m=new WeakMap;class p{async fetchBooks(){try{const t=await fetch(e(r)(this,m));return await t.json()}catch(e){throw new Error(e)}}async fetchCategories(){try{const t=await fetch(e(r)(this,g));return await t.json()}catch(e){throw new Error(e)}}async fetchCategoryBooks(e){try{const t=`https://books-backend.p.goit.global/books/category?category=${e}`,o=await fetch(t);return await o.json()}catch(e){throw new Error(e)}}constructor(){e(l)(this,g,{writable:!0,value:"https://books-backend.p.goit.global/books/category-list"}),e(l)(this,m,{writable:!0,value:"https://books-backend.p.goit.global/books/top-books"})}}var f=new WeakMap;class y{async fetchBook(t){try{const o=await fetch(e(r)(this,f)+t);return await o.json()}catch(e){throw new Error(e)}}constructor(){e(l)(this,f,{writable:!0,value:"https://books-backend.p.goit.global/books/"})}}var b;b=new URL(a("kyEFX").resolve("edJkd"),import.meta.url).toString();var h;h=new URL(a("kyEFX").resolve("ckWAI"),import.meta.url).toString();var k;k=new URL(a("kyEFX").resolve("87zR3"),import.meta.url).toString();var v;v=new URL(a("kyEFX").resolve("3rzcU"),import.meta.url).toString();var w;w=new URL(a("kyEFX").resolve("LbtVt"),import.meta.url).toString();var E;E=new URL(a("kyEFX").resolve("fUzAu"),import.meta.url).toString();var S;S=new URL(a("kyEFX").resolve("8OQ7p"),import.meta.url).toString();const _=async()=>{const t=document.querySelectorAll(".book-category-list"),o=document.querySelector("[data-modal-book]"),n=new y,a=e=>{if("IMG"!==e.target.nodeName)return;o.classList.remove("is-hidden");!async function(e){try{const t=await n.fetchBook(e);console.log(t);const a=s(t);o.innerHTML=a;document.querySelector("[data-modal-book-close]").addEventListener("click",r);document.querySelector("[data-modal-add]").addEventListener("click",c)}catch(e){console.error("Error:",e)}}(e.target.dataset.id)},r=e=>{o.classList.add("is-hidden")};const s=t=>{const o=""!==t.description.trim()?t.description:"In a homage to Louisa May Alcott’s “Little Women,” a young man’s dark past resurfaces as he gets to know the family of his college sweetheart.";return`<div class="modal-book">\n      <button class="modal-book-close" type="button" data-modal-book-close>\n        <svg class="modal-book-close-icon" width="24" height="24">\n          <use href="${e(S)}#icon-close"></use>\n        </svg>\n      </button>\n      <div class="modal-wrapper">\n        <img class="modal-book-img" src="${t.book_image}" alt="${t.title}" width="287" height="408" />\n        <div class="modal-wrapper-content">\n          <h2 class="modal-book-name">${t.title}</h2>\n          <h3 class="modal-book-author">${t.author}</h3>\n          <p class="modal-description-book">${o}</p>\n          <ul class="trade-list">\n            <li class="trade-item">\n              <a href="#">\n                <img \n                  class='trade-link-img amazon-img'\n                  srcset="${e(b)} 1x, ${e(v)} 2x"\n                  src="${e(b)}"\n                  alt="amazon"\n                  width="62"\n                  height="19"\n                />\n              </a>\n            </li>\n            <li class="trade-item">\n              <a href="#">\n                <img\n                  class='trade-link-img book-img'\n                  srcset="${e(h)} 1x, ${e(w)} 2x"\n                  src="${e(h)}"\n                  alt="apple"\n                  width="33"\n                  height="32"\n                />\n              </a>\n            </li>\n            <li class="trade-item">\n              <a href="#">\n                <img\n                  class='trade-link-img shop-img'\n                  srcset="${e(k)} 1x, ${e(E)} 2x"\n                  src="${e(k)}"\n                  alt="book" \n                  width="38" \n                  height="36" \n                />\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class="btn-box">\n        <button class="btn-add-shopping-list" type="button" data-modal-add>\n          ADD TO SHOPPING LIST\n        </button>\n        <div id="shopping-list"></div>\n        <div id="confirmation-message" style="text-align: center; opacity: 0.5; display: none;"></div>\n      </div>\n    </div>`},c=e=>{const t=e.target,o=t.dataset.id;"ADD TO SHOPPING LIST"===t.textContent?(!function(e){const t=JSON.parse(localStorage.getItem("shoppingList"))||[];t.includes(e)||t.push(e);localStorage.setItem("shoppingList",JSON.stringify(t))}(o),t.textContent="REMOVE FROM SHOPPING LIST",i()):(!function(e){const t=JSON.parse(localStorage.getItem("shoppingList"))||[],o=t.indexOf(e);o>-1&&t.splice(o,1);localStorage.setItem("shoppingList",JSON.stringify(t))}(o),t.textContent="ADD TO SHOPPING LIST",l())};const i=()=>{const e=document.querySelector("[data-modal-add]").parentElement,t=document.createElement("p");t.style.marginTop="8px",t.id="confirmation-message",t.style.textAlign="center",t.style.opacity="0.5",t.textContent="Congratulations! You have added the book to the shopping list. To delete, press the button 'Remove from the shopping list'.",e.appendChild(t)},l=()=>{const e=document.getElementById("confirmation-message");e&&e.remove()};t.forEach((e=>{e.addEventListener("click",a)}))},L=new p,$=document.querySelector(".book-category-lists");function x(e){return`\n    <ul class="book-category-list">\n      ${e.map((e=>`\n            <li class="book-category-list-card">\n                <a class="book-category-hover-effect-container">\n                  <img class="book-category-list-img" data-id="${e._id}" src="${e.book_image}" alt="${e.title}" loading="lazy">\n                  <div class="overlay">\n                    <p class="book-category-hover-effect">QUICK VIEW</p>\n                  </div>\n                </a>\n                <h3 class="book-category-list-category-book-name">${e.title}</h3>\n                <p class="book-category-list-book-author">${e.author}</p>\n              </li>\n          `)).join("")}\n    </ul>\n  `}async function M(){try{const e=await L.fetchBooks(),t=await function(e){const t=[];for(const o of e){const n=document.createElement("div");n.innerHTML=`\n      <p class="book-category">${o.list_name}</p>\n      <ul class="book-category-list">\n        ${o.books.map((e=>`\n              <li class="book-category-list-card">\n                <a class="book-category-hover-effect-container">\n                  <img class="book-category-list-img" data-id="${e._id}" src="${e.book_image}" alt="${e.title}" loading="lazy">\n                  <div class="overlay">\n                    <p class="book-category-hover-effect">QUICK VIEW</p>\n                  </div>\n                </a>\n                <h3 class="book-category-list-category-book-name">${e.title}</h3>\n                <p class="book-category-list-book-author">${e.author}</p>\n              </li>\n            `)).join("")}\n      </ul>\n      <div class="book-list-container"></div>\n      <div class="button-container">\n        <button class="book-category-btn" data-category="${o.list_name}" type="button">SEE MORE</button>\n      </div>\n    `,n.querySelector(".book-category-btn").addEventListener("click",(async()=>{const t=n.querySelector(".book-list-container");try{const n=await L.fetchCategoryBooks(o.list_name);if(n.length){const a=[];e.filter((e=>e.list_name===o.list_name))[0].books.map((e=>a.push(e._id)));const r=n.filter((e=>!a.includes(e._id)));if(!r.length)return;const s=x(r);t.innerHTML=s}}catch(e){console.error("Error:",e)}})),t.push(n)}return t}(e);t.forEach((e=>{$.appendChild(e)})),_()}catch(e){console.error("Error:",e)}}const I=new p,H=document.querySelector(".filter-list"),O=document.querySelector(".book-category-lists"),R=document.querySelector(".filter-link");async function T(e){e.sort(((e,t)=>e.position-t.position));const t=e.map((e=>`\n      <li class="filter-list-item">\n        <a href="#" class="category-filter-link">${e.list_name}</a>\n      </li>\n    `)).join("");H.innerHTML=t,document.querySelectorAll(".category-filter-link").forEach((e=>{e.addEventListener("click",F)}))}async function q(){try{const e=await I.fetchCategories();await T(e)}catch(e){console.error("Error:",e)}}function F(e){e.preventDefault();const t=e.target.textContent;document.querySelector(".main-category-text").textContent=t,async function(e){try{const t=`https://books-backend.p.goit.global/books/category?category=${e}`,o=await fetch(t),n=await o.json(),a=document.createElement("div");a.innerHTML=`\n      <ul class="book-category-list">\n        ${n.map((e=>`\n              <li class="book-category-list-card">\n                <a class="book-category-hover-effect-container">\n                  <img class="book-category-list-img" data-id="${e._id}" src="${e.book_image}" alt="${e.title}" loading="lazy">\n                  <div class="overlay">\n                    <p class="book-category-hover-effect">QUICK VIEW</p>\n                  </div>\n                </a>\n                <h3 class="book-category-list-category-book-name">${e.title}</h3>\n                <p class="book-category-list-book-author">${e.author}</p>\n              </li>\n            `)).join("")}\n      </ul>\n    `,O.innerHTML="",O.appendChild(a),_()}catch(e){console.error("Error:",e)}}(t),R.classList.remove("active-filter")}R.addEventListener("click",(()=>{R.classList.add("active-filter")})),async function(){try{await Promise.all([q(),M()])}catch(e){console.error("Error:",e)}}(),window.addEventListener("scroll",(function(){const e=document.getElementById("scrollToTopButton");window.pageYOffset>100?e.style.display="block":e.style.display="none"}));document.getElementById("scrollToTopButton").addEventListener("click",(function(){window.pageYOffset>0&&window.scrollTo({top:0,behavior:"smooth"})})),document.addEventListener("DOMContentLoaded",(function(){document.querySelector(".loader-offline"),document.querySelector(".content")}));let A=localStorage.getItem("darkMode");const C=document.querySelector("#dark-mode-toggle"),j=document.querySelector("[data-modal-book]"),U=()=>{setTimeout((()=>{document.body.classList.add("darkmode"),j.classList.add("darkmode")}),300),localStorage.setItem("darkMode","enabled")};"enabled"===A&&U(),C.addEventListener("click",(()=>{A=localStorage.getItem("darkMode"),"enabled"!==A?U():(setTimeout((()=>{document.body.classList.remove("darkmode"),j.classList.remove("darkmode")}),300),localStorage.setItem("darkMode",null))})),a("1pMlS"),(()=>{const e={openModalBtn:document.querySelector("[header-data-modal-open]"),closeModalBtn:document.querySelector("[header-data-modal-close]"),modal:document.querySelector("[header-data-modal]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})();
//# sourceMappingURL=index.5e84175c.js.map
